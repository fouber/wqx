<!DOCTYPE html><html><head><meta charset="utf-8"><title>文曲星</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><!-- uc强制竖屏 --><meta name="screen-orientation" content="portrait"><!-- QQ强制竖屏 --><meta name="x5-orientation" content="portrait"><style>*{padding:0;margin:0}html,body{width:100%;height:100%;overflow:hidden;-webkit-overflow-scrolling:touch;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;cursor:pointer;font-family:sans-serif}.screen{height:160px;background:#eee;position:relative;overflow:hidden}.lcd{width:320px;height:160px;margin:0 auto}.fr{float:right}.lcd canvas{width:100%;height:100%}.progress{position:absolute;bottom:2px;left:0;height:2px;background:#0cf}#p2.progress{bottom:0;background:#c30}.keyboard{position:absolute;top:180px;left:5px;right:5px;bottom:0}.btn{font-size:12px;display:inline-block;width:100%;height:100%;min-height:25px;line-height:25px;text-align:center;border-radius:3px;background:#fff;color:#010101;box-shadow:0 1px 2px rgba(0,0,0,.5)}.keyboard table{width:100%;border-collapse:collapse;border-spacing:0}.keyboard table td{width:10%;padding:7px 2px 0}.keyboard .btn:active{background:#010101;color:#fff}.btn-success,.btn-error,.btn-warning,.btn-secondary{color:#fff;border-radius:4px;text-shadow:0 1px 1px rgba(0,0,0,.2)}.btn-success{background:#1cb841}.btn-error{background:#ca3c3c}.btn-warning{background:#df7514}.btn-secondary{background:#42b8dd}.index{width:320px;margin:2px auto;font-size:0}.index span{font-size:14px;width:10%;display:inline-block;text-align:center}</style></head><body><div class="screen"><div class="lcd" id="lcd"></div><div class="progress" id="p1"></div><div class="progress" id="p2"></div></div><div class="index"><span></span> <span>1</span> <span>2</span> <span>3</span> <span>4</span> <span>5</span> <span>6</span> <span>7</span> <span>8</span> <span>9</span></div><div class="keyboard"><table><tr><td><div class="btn" data-ref="Run">开机</div></td><td><div class="btn" data-ref="Stop">关机</div></td><td><div class="btn" data-ref="Reset">重置</div></td><td></td><td></td><td></td><td><div class="btn" data-ref="F1">F1</div></td><td><div class="btn" data-ref="F2">F2</div></td><td><div class="btn" data-ref="F3">F3</div></td><td><div class="btn" data-ref="F4">F4</div></td></tr></table><table><tr><td><div class="btn" data-ref="F8">词典</div></td><td><div class="btn" data-ref="F9">名片</div></td><td><div class="btn" data-ref="F10">计算</div></td><td><div class="btn" data-ref="F7">行程</div></td><td><div class="btn" data-ref="F6">游戏</div></td><td><div class="btn" data-ref="F5">时间</div></td><td><div class="btn" data-ref="F11">网络</div></td></tr></table><table><tr><td><div class="btn" data-ref="Q">Q</div></td><td><div class="btn" data-ref="W">W</div></td><td><div class="btn" data-ref="E">E</div></td><td><div class="btn" data-ref="R">R</div></td><td><div class="btn" data-ref="T">T₇</div></td><td><div class="btn" data-ref="Y">Y₈</div></td><td><div class="btn" data-ref="U">U₉</div></td><td><div class="btn" data-ref="I">I</div></td><td><div class="btn" data-ref="O">O</div></td><td><div class="btn" data-ref="P">P</div></td></tr></table><table><tr><td><div class="btn" data-ref="A">A</div></td><td><div class="btn" data-ref="S">S</div></td><td><div class="btn" data-ref="D">D</div></td><td><div class="btn" data-ref="F">F</div></td><td><div class="btn" data-ref="G">G₄</div></td><td><div class="btn" data-ref="H">H₅</div></td><td><div class="btn" data-ref="J">J₆</div></td><td><div class="btn" data-ref="K">K</div></td><td><div class="btn" data-ref="L">L</div></td><td><div class="btn btn-error" data-ref="Enter">Go</div></td></tr></table><table><tr><td><div class="btn" data-ref="Z">Z</div></td><td><div class="btn" data-ref="X">X</div></td><td><div class="btn" data-ref="C">C</div></td><td><div class="btn" data-ref="V">V</div></td><td><div class="btn" data-ref="B">B₁</div></td><td><div class="btn" data-ref="N">N₂</div></td><td><div class="btn" data-ref="M">M₃</div></td><td><div class="btn" data-ref="PageUp">△</div></td><td><div class="btn" data-ref="Up">▲</div></td><td><div class="btn" data-ref="PageDown">▽</div></td></tr></table><table><tr><td><div class="btn" data-ref="Tab">求助</div></td><td><div class="btn" data-ref="Shift">⇧</div></td><td><div class="btn" data-ref="CapsLock">⌨</div></td><td><div class="btn" data-ref="Esc">跳出</div></td><td><div class="btn" data-ref="0">符号₀</div></td><td><div class="btn" data-ref="Period">.</div></td><td><div class="btn" data-ref="Equals">空格₌</div></td><td><div class="btn" data-ref="Left">◄</div></td><td><div class="btn" data-ref="Down">▼</div></td><td><div class="btn" data-ref="Right">►</div></td></tr></table></div><script>function M65C02Context(){this.ram=null,this.memmap=null,this.io_read_map=null,this.io_write_map=null,this.io_read=null,this.io_write=null,this.cycles=0,this.reg_a=0,this.reg_x=0,this.reg_y=0,this.reg_pc=0,this.reg_sp=256,this.flag_c=0,this.flag_z=0,this.flag_i=0,this.flag_d=0,this.flag_b=0,this.flag_u=0,this.flag_v=0,this.flag_n=0,this.irq=0,this.nmi=0,this.wai=0,this.stp=0,this._code=0,this._addr=0,this._tmp1=0,this._tmp2=0,this._counters=new Uint32Array(256)}M65C02Context.prototype.get_reg_ps=function(){return this.flag_c|this.flag_z<<1|this.flag_i<<2|this.flag_d<<3|this.flag_b<<4|this.flag_u<<5|this.flag_v<<6|this.flag_n<<7},M65C02Context.prototype.set_reg_ps=function(_){return this.flag_c=1&_,this.flag_z=(2&_)>>1,this.flag_i=(4&_)>>2,this.flag_d=(8&_)>>3,this.flag_b=(16&_)>>4,this.flag_u=(32&_)>>5,this.flag_v=(64&_)>>6,this.flag_n=(128&_)>>7,_},M65C02Context.prototype.op_func_tbl=[function(_){_.reg_pc++,_.ram[_.reg_sp]=_.reg_pc>>8,_.reg_sp=255&--_.reg_sp|256,_.ram[_.reg_sp]=255&_.reg_pc,_.reg_sp=255&--_.reg_sp|256,_.flag_b=1,_.ram[_.reg_sp]=_.get_reg_ps(),_.reg_sp=255&--_.reg_sp|256,_.flag_i=1,_.reg_pc=_.memmap[7][8191]<<8|_.memmap[7][8190],_.cycles+=7},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_._addr=(_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1],_.reg_pc=_.reg_pc+1&65535,_.reg_a|=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=6},function(_){_.reg_pc=_.reg_pc+1&65535,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_z=_.reg_a&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1|_.reg_a):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1|_.reg_a,_.cycles+=5},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_.reg_a|=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])<<1,_.flag_c=_._tmp1>255?1:0,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,255&_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=255&_._tmp1,_.cycles+=5},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=254&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.flag_u=1,_.ram[_.reg_sp]=_.get_reg_ps(),_.reg_sp=255&--_.reg_sp|256,_.cycles+=3},function(_){_._addr=_.reg_pc,_.reg_pc=_.reg_pc+1&65535,_.reg_a|=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=2},function(_){_._tmp1=_.reg_a<<1,_.flag_c=_._tmp1>255?1:0,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.reg_a=255&_._tmp1,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_z=_.reg_a&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1|_.reg_a):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1|_.reg_a,_.cycles+=6},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_.reg_a|=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])<<1,_.flag_c=_._tmp1>255?1:0,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,255&_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=255&_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,1&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])||(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._tmp2=_._tmp1-((128&_._tmp1)<<1),_.reg_pc=_.reg_pc+1&65535,_.flag_n||(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=2},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=((_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1])+_.reg_y&65535,_.reg_pc=_.reg_pc+1&65535,_.reg_a|=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=(_._tmp1<255?_.ram[_._tmp1+1]:_.ram[0])<<8|_.ram[_._tmp1],_.reg_pc=_.reg_pc+1&65535,_.reg_a|=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=5},function(_){_.cycles+=1},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_z=_.reg_a&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1&~_.reg_a):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1&~_.reg_a,_.cycles+=5},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_.reg_a|=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])<<1,_.flag_c=_._tmp1>255?1:0,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,255&_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=255&_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=253&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.flag_c=0,_.cycles+=2},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_y&65535,_.reg_pc=_.reg_pc+2&65535,_.reg_a|=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_.reg_a=255&++_.reg_a,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_z=_.reg_a&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1&~_.reg_a):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1&~_.reg_a,_.cycles+=6},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_.reg_a|=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])<<1,_.flag_c=_._tmp1>255?1:0,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,255&_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=255&_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,2&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])||(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_.reg_pc=_.reg_pc-1&65535,_.ram[_.reg_sp]=_.reg_pc>>8,_.reg_sp=255&--_.reg_sp|256,_.ram[_.reg_sp]=255&_.reg_pc,_.reg_sp=255&--_.reg_sp|256,_.reg_pc=_._addr,_.cycles+=6},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_._addr=(_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1],_.reg_pc=_.reg_pc+1&65535,_.reg_a&=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=6},function(_){_.reg_pc=_.reg_pc+1&65535,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_z=0|!(_.reg_a&_._tmp1),_.flag_n=(128&_._tmp1)>>7,_.flag_v=(64&_._tmp1)>>6,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_.reg_a&=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])<<1|_.flag_c,_.flag_c=_._tmp1>255?1:0,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,255&_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=255&_._tmp1,_.cycles+=5},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=251&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.set_reg_ps(_.ram[_.reg_sp=255&++_.reg_sp|256]),_.cycles+=4},function(_){_._addr=_.reg_pc,_.reg_pc=_.reg_pc+1&65535,_.reg_a&=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=2},function(_){_._tmp1=_.reg_a<<1|_.flag_c,_.flag_c=_._tmp1>255?1:0,_.reg_a=255&_._tmp1,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_z=0|!(_.reg_a&_._tmp1),_.flag_n=(128&_._tmp1)>>7,_.flag_v=(64&_._tmp1)>>6,_.cycles+=4},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_.reg_a&=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])<<1|_.flag_c,_.flag_c=_._tmp1>255?1:0,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,255&_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=255&_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,4&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])||(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._tmp2=_._tmp1-((128&_._tmp1)<<1),_.reg_pc=_.reg_pc+1&65535,_.flag_n&&(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=2},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=((_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1])+_.reg_y&65535,_.reg_pc=_.reg_pc+1&65535,_.reg_a&=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=(_._tmp1<255?_.ram[_._tmp1+1]:_.ram[0])<<8|_.ram[_._tmp1],_.reg_pc=_.reg_pc+1&65535,_.reg_a&=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=5},function(_){_.cycles+=1},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_z=0|!(_.reg_a&_._tmp1),_.flag_n=(128&_._tmp1)>>7,_.flag_v=(64&_._tmp1)>>6,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_.reg_a&=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])<<1|_.flag_c,_.flag_c=_._tmp1>255?1:0,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,255&_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=255&_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=247&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.flag_c=1,_.cycles+=2},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_y&65535,_.reg_pc=_.reg_pc+2&65535,_.reg_a&=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_.reg_a=255&--_.reg_a,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_z=0|!(_.reg_a&_._tmp1),_.flag_n=(128&_._tmp1)>>7,_.flag_v=(64&_._tmp1)>>6,_.cycles+=4},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_.reg_a&=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])<<1|_.flag_c,_.flag_c=_._tmp1>255?1:0,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,255&_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=255&_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,8&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])||(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_.set_reg_ps(_.ram[_.reg_sp=255&++_.reg_sp|256]),_.irq=1,_.reg_pc=_.ram[_.reg_sp=255&++_.reg_sp|256],_.reg_pc|=_.ram[_.reg_sp=255&++_.reg_sp|256]<<8,_.cycles+=6},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_._addr=(_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1],_.reg_pc=_.reg_pc+1&65535,_.reg_a^=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=6},function(_){_.reg_pc=_.reg_pc+1&65535,_.cycles+=2},function(_){_.cycles+=1},function(_){_.reg_pc=_.reg_pc+1&65535,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_.reg_a^=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_c=1&_._tmp1,_.flag_z=1^_._tmp1?1:0,_.flag_n=0,_._tmp1>>=1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=239&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.ram[_.reg_sp]=_.reg_a,_.reg_sp=255&--_.reg_sp|256,_.cycles+=3},function(_){_._addr=_.reg_pc,_.reg_pc=_.reg_pc+1&65535,_.reg_a^=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=2},function(_){_.flag_c=1&_.reg_a,_.flag_n=0,_.reg_a>>=1,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_.reg_pc=_._addr,_.cycles+=3},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_.reg_a^=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_c=1&_._tmp1,_.flag_z=1^_._tmp1?1:0,_.flag_n=0,_._tmp1>>=1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,16&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])||(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._tmp2=_._tmp1-((128&_._tmp1)<<1),_.reg_pc=_.reg_pc+1&65535,_.flag_v||(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=2},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=((_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1])+_.reg_y&65535,_.reg_pc=_.reg_pc+1&65535,_.reg_a^=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=(_._tmp1<255?_.ram[_._tmp1+1]:_.ram[0])<<8|_.ram[_._tmp1],_.reg_pc=_.reg_pc+1&65535,_.reg_a^=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=5},function(_){_.cycles+=1},function(_){_.reg_pc=_.reg_pc+1&65535,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_.reg_a^=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_c=1&_._tmp1,_.flag_z=1^_._tmp1?1:0,_.flag_n=0,_._tmp1>>=1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=223&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.flag_i=0,_.cycles+=2},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_y&65535,_.reg_pc=_.reg_pc+2&65535,_.reg_a^=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_.ram[_.reg_sp]=_.reg_y,_.reg_sp=255&--_.reg_sp|256,_.cycles+=3},function(_){_.cycles+=1},function(_){_.reg_pc=_.reg_pc+2&65535,_.cycles+=8},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_.reg_a^=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_c=1&_._tmp1,_.flag_z=1^_._tmp1?1:0,_.flag_n=0,_._tmp1>>=1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,32&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])||(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_.reg_pc=_.ram[_.reg_sp=255&++_.reg_sp|256],_.reg_pc|=_.ram[_.reg_sp=255&++_.reg_sp|256]<<8,_.reg_pc=_.reg_pc+1&65535,_.cycles+=6},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_._addr=(_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)+(10*(_._tmp1>>4)+(15&_._tmp1))+_.flag_c,_.flag_c=_._tmp2>99?1:0,_._tmp2%=100,_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a+_._tmp1+_.flag_c,_.flag_c=_._tmp2>255?1:0,_.flag_v=((_.reg_a^_._tmp1^128)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=6},function(_){_.reg_pc=_.reg_pc+1&65535,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_.io_write_map[_._addr]?_.io_write(_._addr,0):_.memmap[_._addr>>13][8191&_._addr]=0,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)+(10*(_._tmp1>>4)+(15&_._tmp1))+_.flag_c,_.flag_c=_._tmp2>99?1:0,_._tmp2%=100,_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a+_._tmp1+_.flag_c,_.flag_c=_._tmp2>255?1:0,_.flag_v=((_.reg_a^_._tmp1^128)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.tmp2=_.flag_c<<7,_.flag_c=1&_._tmp1,_._tmp2=_._tmp1>>1|_.tmp2,_.flag_n=(128&_._tmp2)>>7,_.flag_z=255&_._tmp2?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp2):_.memmap[_._addr>>13][8191&_._addr]=_._tmp2,_.cycles+=5},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=191&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.reg_a=_.ram[_.reg_sp=255&++_.reg_sp|256],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_._addr=_.reg_pc,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)+(10*(_._tmp1>>4)+(15&_._tmp1))+_.flag_c,_.flag_c=_._tmp2>99?1:0,_._tmp2%=100,_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a+_._tmp1+_.flag_c,_.flag_c=_._tmp2>255?1:0,_.flag_v=((_.reg_a^_._tmp1^128)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=2},function(_){_.tmp1=_.flag_c<<7,_.flag_c=1&_.reg_a,_.reg_a=_.reg_a>>1|_.tmp1,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=2},function(_){_.cycles+=1},function(_){_._tmp1=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=(_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1],_.reg_pc=_.reg_pc+2&65535,_.reg_pc=_._addr,_.cycles+=6},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)+(10*(_._tmp1>>4)+(15&_._tmp1))+_.flag_c,_.flag_c=_._tmp2>99?1:0,_._tmp2%=100,_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a+_._tmp1+_.flag_c,_.flag_c=_._tmp2>255?1:0,_.flag_v=((_.reg_a^_._tmp1^128)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=4},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.tmp2=_.flag_c<<7,_.flag_c=1&_._tmp1,_._tmp2=_._tmp1>>1|_.tmp2,_.flag_n=(128&_._tmp2)>>7,_.flag_z=255&_._tmp2?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp2):_.memmap[_._addr>>13][8191&_._addr]=_._tmp2,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,64&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])||(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._tmp2=_._tmp1-((128&_._tmp1)<<1),_.reg_pc=_.reg_pc+1&65535,_.flag_v&&(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=2},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=((_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1])+_.reg_y&65535,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)+(10*(_._tmp1>>4)+(15&_._tmp1))+_.flag_c,_.flag_c=_._tmp2>99?1:0,_._tmp2%=100,_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a+_._tmp1+_.flag_c,_.flag_c=_._tmp2>255?1:0,_.flag_v=((_.reg_a^_._tmp1^128)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=(_._tmp1<255?_.ram[_._tmp1+1]:_.ram[0])<<8|_.ram[_._tmp1],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)+(10*(_._tmp1>>4)+(15&_._tmp1))+_.flag_c,_.flag_c=_._tmp2>99?1:0,_._tmp2%=100,_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a+_._tmp1+_.flag_c,_.flag_c=_._tmp2>255?1:0,_.flag_v=((_.reg_a^_._tmp1^128)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=5},function(_){_.cycles+=1},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_.io_write_map[_._addr]?_.io_write(_._addr,0):_.memmap[_._addr>>13][8191&_._addr]=0,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)+(10*(_._tmp1>>4)+(15&_._tmp1))+_.flag_c,_.flag_c=_._tmp2>99?1:0,_._tmp2%=100,_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a+_._tmp1+_.flag_c,_.flag_c=_._tmp2>255?1:0,_.flag_v=((_.reg_a^_._tmp1^128)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.tmp2=_.flag_c<<7,_.flag_c=1&_._tmp1,_._tmp2=_._tmp1>>1|_.tmp2,_.flag_n=(128&_._tmp2)>>7,_.flag_z=255&_._tmp2?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp2):_.memmap[_._addr>>13][8191&_._addr]=_._tmp2,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=127&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.flag_i=1,_.cycles+=2},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_y&65535,_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)+(10*(_._tmp1>>4)+(15&_._tmp1))+_.flag_c,_.flag_c=_._tmp2>99?1:0,_._tmp2%=100,_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a+_._tmp1+_.flag_c,_.flag_c=_._tmp2>255?1:0,_.flag_v=((_.reg_a^_._tmp1^128)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=4},function(_){_.reg_y=_.ram[_.reg_sp=255&++_.reg_sp|256],_.flag_n=(128&_.reg_y)>>7,_.flag_z=255&_.reg_y?0:1,_.cycles+=4},function(_){_.cycles+=1},function(_){_._tmp1=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x,_._addr=(_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1],_.reg_pc=_.reg_pc+2&65535,_.reg_pc=_._addr,_.cycles+=6
},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)+(10*(_._tmp1>>4)+(15&_._tmp1))+_.flag_c,_.flag_c=_._tmp2>99?1:0,_._tmp2%=100,_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a+_._tmp1+_.flag_c,_.flag_c=_._tmp2>255?1:0,_.flag_v=((_.reg_a^_._tmp1^128)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=4},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.tmp2=_.flag_c<<7,_.flag_c=1&_._tmp1,_._tmp2=_._tmp1>>1|_.tmp2,_.flag_n=(128&_._tmp2)>>7,_.flag_z=255&_._tmp2?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp2):_.memmap[_._addr>>13][8191&_._addr]=_._tmp2,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,128&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])||(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._tmp2=_._tmp1-((128&_._tmp1)<<1),_.reg_pc=_.reg_pc+1&65535,_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles+=3},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_._addr=(_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1],_.reg_pc=_.reg_pc+1&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_a):_.memmap[_._addr>>13][8191&_._addr]=_.reg_a,_.cycles+=6},function(_){_.reg_pc=_.reg_pc+1&65535,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_y):_.memmap[_._addr>>13][8191&_._addr]=_.reg_y,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_a):_.memmap[_._addr>>13][8191&_._addr]=_.reg_a,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_x):_.memmap[_._addr>>13][8191&_._addr]=_.reg_x,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=1|(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.reg_y=255&--_.reg_y,_.flag_n=(128&_.reg_y)>>7,_.flag_z=255&_.reg_y?0:1,_.cycles+=2},function(_){_._addr=_.reg_pc,_.reg_pc=_.reg_pc+1&65535,_.flag_z=0|!(_.reg_a&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])),_.cycles+=2},function(_){_.reg_a=_.reg_x,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_y):_.memmap[_._addr>>13][8191&_._addr]=_.reg_y,_.cycles+=4},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_a):_.memmap[_._addr>>13][8191&_._addr]=_.reg_a,_.cycles+=4},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_x):_.memmap[_._addr>>13][8191&_._addr]=_.reg_x,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,1&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])&&(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._tmp2=_._tmp1-((128&_._tmp1)<<1),_.reg_pc=_.reg_pc+1&65535,_.flag_c||(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=2},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=((_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1])+_.reg_y&65535,_.reg_pc=_.reg_pc+1&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_a):_.memmap[_._addr>>13][8191&_._addr]=_.reg_a,_.cycles+=6},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=(_._tmp1<255?_.ram[_._tmp1+1]:_.ram[0])<<8|_.ram[_._tmp1],_.reg_pc=_.reg_pc+1&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_a):_.memmap[_._addr>>13][8191&_._addr]=_.reg_a,_.cycles+=5},function(_){_.cycles+=1},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_y):_.memmap[_._addr>>13][8191&_._addr]=_.reg_y,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_a):_.memmap[_._addr>>13][8191&_._addr]=_.reg_a,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_y&255,_.reg_pc=_.reg_pc+1&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_x):_.memmap[_._addr>>13][8191&_._addr]=_.reg_x,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=2|(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.reg_a=_.reg_y,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=2},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_y&65535,_.reg_pc=_.reg_pc+2&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_a):_.memmap[_._addr>>13][8191&_._addr]=_.reg_a,_.cycles+=5},function(_){_.reg_sp=256|_.reg_x,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_.io_write_map[_._addr]?_.io_write(_._addr,0):_.memmap[_._addr>>13][8191&_._addr]=0,_.cycles+=4},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_.io_write_map[_._addr]?_.io_write(_._addr,_.reg_a):_.memmap[_._addr>>13][8191&_._addr]=_.reg_a,_.cycles+=5},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_.io_write_map[_._addr]?_.io_write(_._addr,0):_.memmap[_._addr>>13][8191&_._addr]=0,_.cycles+=5},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,2&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])&&(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_._addr=_.reg_pc,_.reg_pc=_.reg_pc+1&65535,_.reg_y=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_y)>>7,_.flag_z=255&_.reg_y?0:1,_.cycles+=2},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_._addr=(_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1],_.reg_pc=_.reg_pc+1&65535,_.reg_a=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=6},function(_){_._addr=_.reg_pc,_.reg_pc=_.reg_pc+1&65535,_.reg_x=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_x)>>7,_.flag_z=255&_.reg_x?0:1,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_.reg_y=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_y)>>7,_.flag_z=255&_.reg_y?0:1,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_.reg_a=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_.reg_x=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_x)>>7,_.flag_z=255&_.reg_x?0:1,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=4|(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.reg_y=_.reg_a,_.flag_n=(128&_.reg_y)>>7,_.flag_z=255&_.reg_y?0:1,_.cycles+=2},function(_){_._addr=_.reg_pc,_.reg_pc=_.reg_pc+1&65535,_.reg_a=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=2},function(_){_.reg_x=_.reg_a,_.flag_n=(128&_.reg_x)>>7,_.flag_z=255&_.reg_x?0:1,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_.reg_y=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_y)>>7,_.flag_z=255&_.reg_y?0:1,_.cycles+=4},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_.reg_a=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_.reg_x=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_x)>>7,_.flag_z=255&_.reg_x?0:1,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,4&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])&&(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._tmp2=_._tmp1-((128&_._tmp1)<<1),_.reg_pc=_.reg_pc+1&65535,_.flag_c&&(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=2},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=((_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1])+_.reg_y&65535,_.reg_pc=_.reg_pc+1&65535,_.reg_a=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=(_._tmp1<255?_.ram[_._tmp1+1]:_.ram[0])<<8|_.ram[_._tmp1],_.reg_pc=_.reg_pc+1&65535,_.reg_a=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=5},function(_){_.cycles+=1},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_.reg_y=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_y)>>7,_.flag_z=255&_.reg_y?0:1,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_.reg_a=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_y&255,_.reg_pc=_.reg_pc+1&65535,_.reg_x=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_x)>>7,_.flag_z=255&_.reg_x?0:1,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=8|(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.flag_v=0,_.cycles+=2},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_y&65535,_.reg_pc=_.reg_pc+2&65535,_.reg_a=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_.reg_x=255&_.reg_sp,_.flag_n=(128&_.reg_x)>>7,_.flag_z=255&_.reg_x?0:1,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_.reg_y=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_y)>>7,_.flag_z=255&_.reg_y?0:1,_.cycles+=4},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_.reg_a=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles+=4},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_y&65535,_.reg_pc=_.reg_pc+2&65535,_.reg_x=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_n=(128&_.reg_x)>>7,_.flag_z=255&_.reg_x?0:1,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,8&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])&&(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_._addr=_.reg_pc,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.reg_y-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=2},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_._addr=(_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.reg_a-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=6},function(_){_.reg_pc=_.reg_pc+1&65535,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.reg_y-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.reg_a-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])-1&255,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=16|(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.reg_y=255&++_.reg_y,_.flag_n=(128&_.reg_y)>>7,_.flag_z=255&_.reg_y?0:1,_.cycles+=2},function(_){_._addr=_.reg_pc,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.reg_a-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=2},function(_){_.reg_x=255&--_.reg_x,_.flag_n=(128&_.reg_x)>>7,_.flag_z=255&_.reg_x?0:1,_.cycles+=2},function(_){_.reg_pc=_.reg_pc-1&65535,_.wai=1,_.cycles+=3},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.reg_y-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=4},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.reg_a-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=4},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])-1&255,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,16&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])&&(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._tmp2=_._tmp1-((128&_._tmp1)<<1),_.reg_pc=_.reg_pc+1&65535,_.flag_z||(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=2},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=((_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1])+_.reg_y&65535,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.reg_a-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=(_._tmp1<255?_.ram[_._tmp1+1]:_.ram[0])<<8|_.ram[_._tmp1],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.reg_a-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=5},function(_){_.cycles+=1},function(_){_.reg_pc=_.reg_pc+1&65535,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.reg_a-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])-1&255,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=32|(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.flag_d=0,_.cycles+=2},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_y&65535,_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.reg_a-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=4},function(_){_.ram[_.reg_sp]=_.reg_x,_.reg_sp=255&--_.reg_sp|256,_.cycles+=3},function(_){_.reg_pc=_.reg_pc-1&65535,_.stp=1,_.cycles+=3},function(_){_.reg_pc=_.reg_pc+2&65535,_.cycles+=4},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.reg_a-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=4},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])-1&255,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,32&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])&&(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_._addr=_.reg_pc,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.reg_x-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=2},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_._addr=(_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)-(10*(_._tmp1>>4)+(15&_._tmp1))-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_._tmp2%=100,_._tmp2<0&&(_._tmp2+=100),_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a-_._tmp1-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_.flag_v=((_.reg_a^_._tmp1)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=6},function(_){_.reg_pc=_.reg_pc+1&65535,_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.reg_x-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)-(10*(_._tmp1>>4)+(15&_._tmp1))-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_._tmp2%=100,_._tmp2<0&&(_._tmp2+=100),_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a-_._tmp1-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_.flag_v=((_.reg_a^_._tmp1)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=3},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])+1&255,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=64|(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.reg_x=255&++_.reg_x,_.flag_n=(128&_.reg_x)>>7,_.flag_z=255&_.reg_x?0:1,_.cycles+=2},function(_){_._addr=_.reg_pc,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)-(10*(_._tmp1>>4)+(15&_._tmp1))-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_._tmp2%=100,_._tmp2<0&&(_._tmp2+=100),_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a-_._tmp1-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_.flag_v=((_.reg_a^_._tmp1)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=2},function(_){_.cycles+=2},function(_){_.cycles+=1},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.reg_x-(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_c=_._tmp1<0?0:1,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.cycles+=4},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)-(10*(_._tmp1>>4)+(15&_._tmp1))-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_._tmp2%=100,_._tmp2<0&&(_._tmp2+=100),_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a-_._tmp1-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_.flag_v=((_.reg_a^_._tmp1)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=4},function(_){_._addr=(_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+2&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])+1&255,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,64&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])&&(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._tmp2=_._tmp1-((128&_._tmp1)<<1),_.reg_pc=_.reg_pc+1&65535,_.flag_z&&(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=2},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=((_._tmp1<65535?_.memmap[_._tmp1+1>>13][_._tmp1+1&8191]:_.ram[0])<<8|_.memmap[_._tmp1>>13][8191&_._tmp1])+_.reg_y&65535,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)-(10*(_._tmp1>>4)+(15&_._tmp1))-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_._tmp2%=100,_._tmp2<0&&(_._tmp2+=100),_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a-_._tmp1-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_.flag_v=((_.reg_a^_._tmp1)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=5},function(_){_._tmp1=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_._addr=(_._tmp1<255?_.ram[_._tmp1+1]:_.ram[0])<<8|_.ram[_._tmp1],_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)-(10*(_._tmp1>>4)+(15&_._tmp1))-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_._tmp2%=100,_._tmp2<0&&(_._tmp2+=100),_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a-_._tmp1-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_.flag_v=((_.reg_a^_._tmp1)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=5},function(_){_.cycles+=1},function(_){_.reg_pc=_.reg_pc+1&65535,_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)-(10*(_._tmp1>>4)+(15&_._tmp1))-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_._tmp2%=100,_._tmp2<0&&(_._tmp2+=100),_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a-_._tmp1-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_.flag_v=((_.reg_a^_._tmp1)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=4},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc]+_.reg_x&255,_.reg_pc=_.reg_pc+1&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])+1&255,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,_._tmp1=128|(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr]),_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=5},function(_){_.flag_d=1,_.cycles+=2},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_y&65535,_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)-(10*(_._tmp1>>4)+(15&_._tmp1))-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_._tmp2%=100,_._tmp2<0&&(_._tmp2+=100),_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a-_._tmp1-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_.flag_v=((_.reg_a^_._tmp1)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=4},function(_){_.reg_x=_.ram[_.reg_sp=255&++_.reg_sp|256],_.flag_n=(128&_.reg_x)>>7,_.flag_z=255&_.reg_x?0:1,_.cycles+=4},function(_){_.cycles+=1},function(_){_.reg_pc=_.reg_pc+2&65535,_.cycles+=4},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_._tmp1=_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr],_.flag_d?(_._tmp2=10*(_.reg_a>>4)+(15&_.reg_a)-(10*(_._tmp1>>4)+(15&_._tmp1))-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_._tmp2%=100,_._tmp2<0&&(_._tmp2+=100),_.reg_a=_._tmp2/10%10<<4|_._tmp2%10,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1,_.cycles++):(_._tmp2=_.reg_a-_._tmp1-1+_.flag_c,_.flag_c=_._tmp2<0?0:1,_.flag_v=((_.reg_a^_._tmp1)&(_.reg_a^_._tmp2)&128)>>7,_.reg_a=255&_._tmp2,_.flag_n=(128&_.reg_a)>>7,_.flag_z=255&_.reg_a?0:1),_.cycles+=4},function(_){_._addr=((_.reg_pc<65535?_.memmap[_.reg_pc+1>>13][_.reg_pc+1&8191]:_.ram[0])<<8|_.memmap[_.reg_pc>>13][8191&_.reg_pc])+_.reg_x&65535,_.reg_pc=_.reg_pc+2&65535,_._tmp1=(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])+1&255,_.flag_n=(128&_._tmp1)>>7,_.flag_z=255&_._tmp1?0:1,_.io_write_map[_._addr]?_.io_write(_._addr,_._tmp1):_.memmap[_._addr>>13][8191&_._addr]=_._tmp1,_.cycles+=6},function(_){_._addr=_.memmap[_.reg_pc>>13][8191&_.reg_pc],_.reg_pc=_.reg_pc+1&65535,128&(_.io_read_map[_._addr]?_.io_read(_._addr):_.memmap[_._addr>>13][8191&_._addr])&&(_.reg_pc=_.reg_pc+_._tmp2&65535,_.cycles++),_.cycles+=5
}],M65C02Context.prototype.execute=function(){this._code=this.memmap[this.reg_pc>>13][8191&this.reg_pc],this.reg_pc=this.reg_pc+1&65535,this.op_func_tbl[this._code](this)},M65C02Context.prototype.doIrq=function(){this.stp||(this.nmi||(this.wai&&(this.reg_pc=this.reg_pc+1&65535,this.wai=0),this.ram[this.reg_sp]=this.reg_pc>>8,this.reg_sp=255&--this.reg_sp|256,this.ram[this.reg_sp]=255&this.reg_pc,this.reg_sp=255&--this.reg_sp|256,this.flag_i=1,this.ram[this.reg_sp]=this.get_reg_ps(),this.reg_sp=255&--this.reg_sp|256,this.reg_pc=this.memmap[7][8187]<<8|this.memmap[7][8186],this.nmi=1,this.cycles+=7),this.irq||(this.wai&&(this.reg_pc=this.reg_pc+1&65535,this.wai=0),this.flag_i||(this.ram[this.reg_sp]=this.reg_pc>>8,this.reg_sp=255&--this.reg_sp|256,this.ram[this.reg_sp]=255&this.reg_pc,this.reg_sp=255&--this.reg_sp|256,this.flag_b=0,this.ram[this.reg_sp]=this.get_reg_ps(),this.reg_sp=255&--this.reg_sp|256,this.reg_pc=this.memmap[7][8191]<<8|this.memmap[7][8190],this.flag_i=1,this.cycles+=7)))};</script><script>var Wqx=function(){function t(t,e,i){for(var r=0;i>r;r++)t[r]=e[r]}function e(t,e,i){return e=0|e,t instanceof ArrayBuffer||(e+=t.byteOffset,t=t.buffer),null==i&&(i=t.byteLength-e),new Uint8Array(t,e,i)}function i(t,e){e=e||{},this._DEBUG=!1,this.div=t,this.frameCounter=0,this.nmiCounter=0,this.clockCounter=0,this.shouldIrq=!1,this.shouldNmi=!1,this.frameTimer=null,this.totalInsts=0,this.keypadmatrix=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],this.lcdoffshift0flag=0,this.lcdbuffaddr=null,this.timer0started=!1,this.timer0value=0,this.ptr40=null,this.zp40cache=null,this.rom=null,this.volume0array=[],this.volume1array=[],this.volume2array=[],this.nor=null,this.norbankheader=[],this.ram=null,this.memmap=[],this.bbsbankheader=[],this.may4000ptr=null,this.cpu=null,this.initLcd(),this.initRom(),this.initNor(),this.initRam(),this.initMemmap(),this.initIo(),this.resetCpu()}function r(t,e){var i=t.toString(16).toUpperCase();return new Array(e-i.length+1).join("0")+i}function s(t){return t[0]|t[1]<<1|t[2]<<2|t[3]<<3|t[4]<<4|t[5]<<5|t[6]<<6|t[7]<<7}var a=0,h=1,o=4,n=5,c=6,m=8,p=9,u=10,l=11,d=12,f=12,y=13,k=15,_=21,v=27,b=32,C=35,w=0,S=1,g=2,R=3,T=4,x=5,B=6,A=7,I=5e6,F=50,O=I/F,P=I/2,q=I/250;i.prototype.initLcd=function(){var t=this.div.ownerDocument,e=t.createElement("canvas");e.width=320,e.height=160,this.div.appendChild(e),this.canvas=e,this.canvasCtx=e.getContext("2d"),this.canvasCtx.fillStyle="#32284A",this.canvasCtx.setTransform(2,0,0,2,0,0),this.canvasCtx.save()},i.prototype.initRom=function(){this.rom=new Uint8Array(25165824);for(var t=0;256>t;t++)this.volume0array[t]=e(this.rom,32768*t,32768),this.volume1array[t]=e(this.rom,32768*(t+256),32768),this.volume2array[t]=e(this.rom,32768*(t+512),32768)},i.prototype.initNor=function(){this.nor=new Uint8Array(1048576),this.norbankheader=[];for(var t=0;32>t;t++)this.norbankheader[t]=e(this.nor,32768*t,32768)},i.prototype.initRam=function(){this.ram=new Uint8Array(65536),this.ptr40=e(this.ram,64,64),this.zp40cache=new Uint8Array(64)},i.prototype.initMemmap=function(){this.memmap[w]=e(this.ram,0,8192),this.ram2000_4000=e(this.ram,8192,8192),this.memmap[S]=this.ram2000_4000,this.ram4000_6000=e(this.ram,16384,8192),this.memmap[g]=this.ram4000_6000,this.memmap[R]=e(this.ram,24576,8192),this.memmap[T]=e(this.ram,32768,8192),this.memmap[x]=e(this.ram,40960,8192),this.memmap[B]=e(this.ram,49152,8192),this.memmap[A]=e(this.ram,57344,8192),this.ramRomBank1=new Uint8Array(8192),this.fillC000BIOSBank(this.volume0array),this.memmap[B]=e(this.bbsbankheader[0],0,8192),this.may4000ptr=this.volume0array[0],this.memmap[A]=e(this.volume0array[0],8192,8192),this.switch4000ToBFFF()};var D=["map0000","map2000","map4000","map6000","map8000","mapA000","mapC000","mapE000"];return i.prototype._dbg_ptrName=function(t){var e=this.memmap[t],i=D[t];return e.buffer===this.rom.buffer?i+": ROM[0x"+r(e.byteOffset,8)+"]":e.buffer===this.nor.buffer?i+": NOR[0x"+r(e.byteOffset,8)+"]":i+": RAM[0x"+r(e.byteOffset,8)+"]"},i.prototype._dbg_logMemmap=function(){for(var t=[],e=0;e<D.length;e++)t.push(this._dbg_ptrName(e));console.log(t.join("\n"))},i.prototype.fillC000BIOSBank=function(t){this.bbsbankheader[0]=e(t[0],0,8192),this.bbsbankheader[1]=this.ramRomBank1,this.bbsbankheader[2]=e(t[0],16384,8192),this.bbsbankheader[3]=e(t[0],24576,8192);for(var i=0;3>i;i++)this.bbsbankheader[4*i+4]=e(t[i+1],0,8192),this.bbsbankheader[4*i+5]=e(t[i+1],8192,8192),this.bbsbankheader[4*i+6]=e(t[i+1],16384,8192),this.bbsbankheader[4*i+7]=e(t[i+1],24576,8192)},i.prototype.switch4000ToBFFF=function(){this.memmap[g]=e(this.may4000ptr,0,8192),this.memmap[R]=e(this.may4000ptr,8192,8192),this.memmap[T]=e(this.may4000ptr,16384,8192),this.memmap[x]=e(this.may4000ptr,24576,8192)},i.prototype.initIo=function(){this.io_read_map=new Array(65536),this.io_write_map=new Array(65536);for(var t=0;65536>t;t++)this.io_read_map[t]=64>t,this.io_write_map[t]=64>t||t>=16384;this.io_read=this.readIO.bind(this),this.io_write=this.writeIO.bind(this),this._eraseBuff=new Uint8Array(256),this.ram[d]=40,this.ram[v]=0,this.ram[h]=0,this.ram[o]=0,this.ram[n]=0,this.ram[m]=0,this.ram[a]=0,this.ram[p]=0},i.prototype.readIO=function(t){switch(t){case 0:return this.read00BankSwitch();case 2:return this.read02Timer0Value();case 4:return this.read04StopTimer0();case 5:return this.read05StartTimer0;case 6:return this.read06StopTimer1();case 7:return this.read07StartTimer1();case 59:return this.read3BUnknown();case 63:return this.read3FClock();default:return this.ram[t]}},i.prototype.read00BankSwitch=function(){return this.ram[a]},i.prototype.read04StopTimer0=function(){return this.timer0started&&(this.timer0value=this.read02Timer0Value(),this.timer0started=!1),this.ram[o]},i.prototype.read02Timer0Value=function(){return this.timer0started&&(this.timer0value=255&Math.floor((this.cpu.cycles-this.timer0startcycles)/I)),this.timer0value},i.prototype.read05StartTimer0=function(){return console.log("read05StartTimer0"),this.timer0started=!0,this.timer0startcycles=this.cpu.cycles,this.ram[n]},i.prototype.read06StopTimer1=function(){return console.log("read06StopTimer1: "+this.ram[o]),this.ram[c]},i.prototype.read07StartTimer1=function(){console.log("read06StopTimer1")},i.prototype.read3BUnknown=function(){return 3&this.ram[61]?void 0:254&this.clockRecords[59]},i.prototype.read3FClock=function(){return this.clockRecords[this.ram[62]]||0},i.prototype.writeIO=function(t,e){switch(t){case 0:return this.write00BankSwitch(e);case 2:return this.write02Timer0Value(e);case 5:return this.write05ClockCtrl(e);case 6:return this.write06LCDStartAddr(e);case 8:return this.write08Port0(e);case 9:return this.write09Port1(e);case 10:return this.write0AROABBS(e);case 12:return this.writeTimer01Control(e);case 13:return this.write0DVolumeIDLCDSegCtrl(e);case 15:return this.write0FZeroPageBankswitch(e);case 32:return this.write20JG(e);case 35:return this.write23JGWav(e);case 63:return this.write3FClock(e)}return t>=this.lcdbuffaddr&&t<this.lcdbuffaddr+1600?this.updateLCD(t,e):t>=16384?this.writeGE4000(t,e):void(this.ram[t]=e)},i.prototype.write00BankSwitch=function(t){this.ram[a]!==t&&(32>t?this.may4000ptr=this.norbankheader[t]:t>=128&&(this.may4000ptr=1&this.ram[y]?this.volume1array[t]:2&this.ram[y]?this.volume2array[t]:this.volume0array[t]),this.switch4000ToBFFF(),this.ram[a]=t)},i.prototype.write02Timer0Value=function(t){this.timer0started?this.timer0startcycles=this.cpu.cycles-t*I/10:this.timer0value=t},i.prototype.write05ClockCtrl=function(t){8&this.ram[n]&&0===(15&t)&&(this.lcdoffshift0flag=!0),this.ram[n]=t},i.prototype.setLcdStartAddr=function(t){this.lcdbuffaddr=t;for(var e=0;1600>e;e++)this.io_write_map[this.lcdbuffaddr+e]=!0;console.log("lcdAddr: "+this.lcdbuffaddr)},i.prototype.write06LCDStartAddr=function(t){console.log("write06LCDStartAddr: "+t),null==this.lcdbuffaddr&&this.setLcdStartAddr((3&this.ram[f])<<12|t<<4),this.ram[c]=t,this.ram[p]&=254},i.prototype.write08Port0=function(){this.ram[l]&=254},i.prototype.write09Port1=function(t){switch(t){case 1:this.ram[m]=s(this.keypadmatrix[0]);break;case 2:this.ram[m]=s(this.keypadmatrix[1]);break;case 4:this.ram[m]=s(this.keypadmatrix[2]);break;case 8:this.ram[m]=s(this.keypadmatrix[3]);break;case 16:this.ram[m]=s(this.keypadmatrix[4]);break;case 32:this.ram[m]=s(this.keypadmatrix[5]);break;case 64:this.ram[m]=s(this.keypadmatrix[6]);break;case 128:this.ram[m]=s(this.keypadmatrix[7]);break;case 0:this.ram[l]|=1,254===this.keypadmatrix[7]&&(this.ram[l]&=254);break;case 127:if(127===this.ram[_]){this.ram[m]=s(this.keypadmatrix[0])|s(this.keypadmatrix[1])|s(this.keypadmatrix[2])|s(this.keypadmatrix[3])|s(this.keypadmatrix[4])|s(this.keypadmatrix[5])|s(this.keypadmatrix[6])|s(this.keypadmatrix[7]);break}}this.ram[p]=t},i.prototype.write0AROABBS=function(t){t!==this.ram[u]&&(this.memmap[B]=e(this.bbsbankheader[15&t],0,8192),this.ram[u]=t)},i.prototype.writeTimer01Control=function(t){null===this.lcdbuffaddr&&(this.lcdbuffaddr=(3&t)<<12|this.ram[c]<<4,console.log("lcdAddr: "+this.lcdbuffaddr)),this.ram[f]=t},i.prototype.write0DVolumeIDLCDSegCtrl=function(t){if(t!==this.ram[y]){var i=this.ram[a];1===(3&t)?(this.fillC000BIOSBank(this.volume1array),this.may4000ptr=this.volume1array[i],this.memmap[A]=e(this.volume1array[0],8192,8192)):3===(3&t)?(this.fillC000BIOSBank(this.volume2array),this.may4000ptr=this.volume2array[i],this.memmap[A]=e(this.volume2array[0],8192,8192)):(this.fillC000BIOSBank(this.volume0array),this.may4000ptr=this.volume0array[i],this.memmap[A]=e(this.volume0array[0],8192,8192));var r=this.ram4000_6000,s=this.ram[u];4&s||(r=this.ram2000_4000),this.memmap[S]!==r&&(this.memmap[S]=r),this.memmap[B]=this.bbsbankheader[15&s],this.switch4000ToBFFF()}this.ram[y]=t},i.prototype.write0FZeroPageBankswitch=function(e){var i=7&this.ram[k],r=7&e,s=this.getZeroPagePointer(r);if(i!==r)if(0===i)t(this.zp40cache,this.ptr40,64),t(this.ptr40,s,64);else{var a=this.getZeroPagePointer(i);t(a,this.ptr40,64),0!==r?t(this.ptr40,s,64):t(this.ptr40,this.zp40cache,64)}this.ram[k]=e},i.prototype.getZeroPagePointer=function(t){return t>=4?e(this.ram,t+4<<6,64):e(this.ram,0,64)},i.prototype.write20JG=function(t){this.ram[b]=t,(128===t||64===t)&&(this.ram[b]=0)},i.prototype.write23JGWav=function(t){this.ram[C]=t,194===t||196===t||128===t&&(this.ram[b]=128)},i.prototype.write3FClock=function(t){this.ram[62]>=7?11===this.ram[62]?(this.ram[61]=248,this.mayClockFlags|=7&t,this.clockRecords[11]=t^127&(this.clockRecords[11]^t)):10===this.ram[62]?(this.clockRecords[10]=t,this.mayClockFlags|=7&t):this.clockRecords[this.ram[62]%80]=t:128&this.clockRecords[11]||(this.clockRecords[this.ram[62]]=t),this.ram[63]=t},i.prototype._eraseStep=0,i.prototype._eraseType=0,i.prototype._eraseSelectedBank=0,i.prototype._eraseTemp1=0,i.prototype._eraseTemp2=0,i.prototype._eraseBuff=null,i.prototype.writeGE4000=function(t,e){function i(){for(var t=32;t--;)for(var e=32768;e--;)o.norbankheader[t][e]=255}function r(){for(var t=256;t--;)o._eraseBuff[t]=255}var s=this.memmap[t>>13].buffer;if(s===this.ram||s===this.ramRomBank1)return this.memmap[t>>13][8191&t]=e,void(s===this.ramRomBank1&&console.log("write to ramRomBank1"));if(!(t>=57344)){var h=this.ram[a];if(!(h>=32)){var o=this;if(0===this._eraseStep){if(21845===t&&170===e)return void(this._eraseStep=1);if(32768===t&&240===e)return}else if(1===this._eraseStep){if(43690===t&&85===e)return void(this._eraseStep=2)}else if(2===this._eraseStep){if(21845===t)switch(e){case 144:return this._eraseSelectedBank=this.ram[a],this._eraseTemp1=this.norbankheader[this._eraseSelectedBank][16384],this._eraseTemp2=this.norbankheader[this._eraseSelectedBank][16385],this.norbankheader[this._eraseSelectedBank][16384]=199,this.norbankheader[this._eraseSelectedBank][16385]=213,this._eraseStep=3,void(this._eraseType=1);case 160:return this._eraseStep=3,void(this._eraseType=2);case 128:return this._eraseStep=3,void(this._eraseType=3);case 168:return this._eraseStep=3,void(this._eraseType=4);case 136:return this._eraseStep=3,void(this._eraseType=5);case 120:return this._eraseStep=3,void(this._eraseType=6)}}else if(3===this._eraseStep)switch(this._eraseType){case 1:if(240===e)return this.norbankheader[this._eraseSelectedBank][16384]=this._eraseTemp1,this.norbankheader[this._eraseSelectedBank][16385]=this._eraseTemp2,this._eraseStep=0,void(this._eraseType=0);break;case 2:return this.may4000ptr[t-16384]&=e,void(this._eraseStep=4);case 4:return this._eraseStep=4,void(this._eraseBuff[t%256]&=e);case 3:case 5:if(21845===t&&170===e)return void(this._eraseStep=4)}else if(4===this._eraseStep)switch(this._eraseType){case 3:case 5:if(43690===t&&85===e)return void(this._eraseStep=5)}else if(5===this._eraseStep){if(21845===t&&16===e)return i(),this._eraseStep=6,void(5===this._eraseType&&r());if(3===this._eraseType&&48===e){for(var n=this.ram[a],c=t-t%2048-16384,m=2048;m--;)this.norbankheader[n][c+m]=255;return void(this._eraseStep=6)}if(5===this._eraseType&&72===e)return r(),void(this._eraseStep=6)}return 32768===t&&240===e?(this._eraseStep=0,void(this._eraseType=0)):void console.log("error occurs when operate in flash! "+t.toString(16)+","+e.toString(16))}}},i.prototype.resetCpu=function(){this.cpu=new M65C02Context,this.cpu.ram=this.ram,this.cpu.memmap=this.memmap,this.cpu.io_read_map=this.io_read_map,this.cpu.io_write_map=this.io_write_map,this.cpu.io_read=this.io_read,this.cpu.io_write=this.io_write,this.cpu.cycles=0,this.cpu.reg_a=0,this.cpu.reg_x=0,this.cpu.reg_y=0,this.cpu.set_reg_ps(36),this.cpu.reg_pc=this.memmap[7][8189]<<8|this.memmap[7][8188],this.cpu.reg_sp=511,this.cpu.irq=1,this.cpu.nmi=1,this.cpu.wai=0,this.cpu.stp=0},i.prototype.loadBROM=function(i){for(var r=0;r<i.byteLength;){var s=e(i,r,16384),a=e(i,r+16384,16384),h=e(this.rom,r+16384,16384),o=e(this.rom,r,16384);t(h,s,16384),t(o,a,16384),r+=32768}this.resetCpu()},i.prototype.loadNorFlash=function(i){for(var r=0;r<i.byteLength;){var s=e(i,r,16384),a=e(i,r+16384,16384),h=e(this.nor,r+16384,16384),o=e(this.nor,r,16384);t(h,s,16384),t(o,a,16384),r+=32768}this.resetCpu()},i.prototype.updateLCD=function(t,e){var i=t-this.lcdbuffaddr,r=this.ram[t],s=Math.floor(i/20),a=i%20,h=8*a,o=r^e;128&o&&(128&e?a>0&&this.canvasCtx.fillRect(h+0,s,1,1):a>0&&this.canvasCtx.clearRect(h+0,s,1,1)),64&o&&(64&e?this.canvasCtx.fillRect(h+1,s,1,1):this.canvasCtx.clearRect(h+1,s,1,1)),32&o&&(32&e?this.canvasCtx.fillRect(h+2,s,1,1):this.canvasCtx.clearRect(h+2,s,1,1)),16&o&&(16&e?this.canvasCtx.fillRect(h+3,s,1,1):this.canvasCtx.clearRect(h+3,s,1,1)),8&o&&(8&e?this.canvasCtx.fillRect(h+4,s,1,1):this.canvasCtx.clearRect(h+4,s,1,1)),4&o&&(4&e?this.canvasCtx.fillRect(h+5,s,1,1):this.canvasCtx.clearRect(h+5,s,1,1)),2&o&&(2&e?this.canvasCtx.fillRect(h+6,s,1,1):this.canvasCtx.clearRect(h+6,s,1,1)),1&o&&(1&e?this.canvasCtx.fillRect(h+7,s,1,1):this.canvasCtx.clearRect(h+7,s,1,1)),this.ram[t]=e},i.prototype.mayClockFlags=0,i.prototype.adjustTime=function(){++this.clockRecords[0]>=60&&(this.clockRecords[0]=0,++this.clockRecords[1]>=60&&(this.clockRecords[1]=0,++this.clockRecords[2]>=24&&(this.clockRecords[2]&=0,++this.clockRecords[3])))},i.prototype.encounterIRQClock=function(){return 2&this.clockRecords[10]&&2&this.mayClockFlags&&(128&this.clockRecords[7]&&31&!(this.clockRecords[7]^this.clockRecords[2])||128&this.clockRecords[6]&&63&!(this.clockRecords[6]^this.clockRecords[1])||128&this.clockRecords[5]&&63&!(this.clockRecords[5]^this.clockRecords[0]))?!0:!1},i.prototype.run=function(){this._timerCounter=0,this._instCount=0,this.clockRecords=new Uint8Array(80),this.frameTimer||(this.frameTimer=setInterval(this.frame.bind(this),1e3/F))},i.prototype.stop=function(){clearInterval(this.frameTimer),this.frameTimer=null},i.prototype.reset=function(){this.resetCpu(),this.frameCounter=0,this.nmiCounter=0},i.prototype.frame=function(){for(var t=O*(this.frameCounter+1),e=P*(this.nmiCounter+1),i=q*(this.clockCounter+1);this.cpu.cycles<t;){if(this._DEBUG&&"undefined"!=typeof wqxsimlogs&&wqxsimlogs.length>1)if(this._instCount>=wqxsimlogs.START&&this._instCount<wqxsimlogs.START+wqxsimlogs.length-1){var r=wqxsimlogs[this._instCount-wqxsimlogs.START],s="";if(r.A!==this.cpu.reg_a&&(s+=" A "),r.X!==this.cpu.reg_x&&(s+=" X "),r.Y!==this.cpu.reg_y&&(s+=" Y "),r.PS!==this.cpu.get_reg_ps()&&(s+=" PS "),r.SP+256!==this.cpu.reg_sp&&(s+=" SP "),r.PC!==this.cpu.reg_pc&&(s+=" PC "),r.OP!==this.memmap[this.cpu.reg_pc>>13][8191&this.cpu.reg_pc]&&(s+=" OP "),s)return console.log(this._instCount+": "+s),void this.stop()}else this._instCount===wqxsimlogs.START+wqxsimlogs.length-1&&alert("good!");this.cpu.execute(),this.cpu.cycles>=e&&(this.nmiCounter++,e+=P,1&this.nmiCounter||this.adjustTime(),!this.encounterIRQClock()||1&this.nmiCounter?this.ram[61]=0:(this.ram[61]=32,this.mayClockFlags&=253),this.shouldIrq=!0),this.shouldIrq&&!this.cpu.flag_i&&(this.cpu.irq=0,this.shouldIrq=!1,this.cpu.doIrq()),this._instCount++,this.cpu.cycles>=i&&(this.clockCounter++,this.clockRecords[4]++,i+=q,this.ram[h]|=8,this.shouldIrq=!0),this.totalInsts++}this.frameCounter++},i}();</script><script>!function(){function e(e){var n=!1,o=!1,r=function(){n&&o&&(e(),r=a())},s=t("#p1"),u=new XMLHttpRequest;u.open("GET","rom/nc1020.fls",!0),u.responseType="arraybuffer",u.addEventListener("progress",function(e){s.style.width=e.loaded/e.total*100+"%"},!1),u.addEventListener("loadend",function(){s.style.width="100%",d.loadNorFlash(u.response),n=!0,s.parentNode.removeChild(s),r()},!1),u.send(),s.style.width="10px";var i=t("#p2"),c=new XMLHttpRequest;c.addEventListener("progress",function(e){i.style.width=e.loaded/e.total*100+"%"},!1),c.addEventListener("loadend",function(){i.style.width="100%",d.loadBROM(c.response),o=!0,i.parentNode.removeChild(i),r()},!1),c.open("GET","rom/obj_lu.bin",!0),c.responseType="arraybuffer",c.send(),s.style.width="5px"}window.onerror=function(e){alert(e)};var t=function(e){return document.querySelector(e)},n=!1,o=!1,r=!1,a=function(){},s=t("#lcd"),d=new Wqx(s);if("undefined"!=typeof document&&"ontouchstart"in document.documentElement)var u="touchstart",i="touchend";else u="mousedown",i="mouseup";var c={F12:2,F5:8,F6:9,F7:10,F8:11,F9:12,F10:13,F11:14,Tab:56,Shift:57,CapsLock:58,Esc:59,0:60,Period:61,Equals:62,Left:63,Z:48,X:49,C:50,V:51,B:52,N:53,M:54,PageUp:55,A:40,S:41,D:42,F:43,G:44,H:45,J:46,K:47,Q:32,W:33,E:34,R:35,T:36,Y:37,U:38,I:39,O:24,L:25,Up:26,Down:27,P:28,Enter:29,PageDown:30,Right:31,F1:16,F2:17,F3:18,F4:19},f=function(e){return function(t){t.preventDefault(),t.stopPropagation();var n=t.target;if(/\bbtn\b/.test(n.className)){var o=n.getAttribute("data-ref");e(o)}}},p=function(e,t){var n=c[e];if(r&&n){var o=n>>3,a=7&n;d.keypadmatrix[a][o]=t?1:0}},l=function(e){switch(e){case"Run":case"Stop":case"Reset":break;default:p(e,!0)}},v=function(t){switch(t){case"Run":o||r||(n?(d.run(),r=!0):(o=!0,e(function(){o=!1,n=!0,d.run(),r=!0})));break;case"Stop":r&&(d.stop(),r=!1);break;case"Reset":n&&d.reset();break;default:p(t,!1)}},h=t(".keyboard");h.addEventListener(u,f(l),!1),h.addEventListener(i,f(v),!1),document.documentElement.addEventListener("touchmove",function(e){e.preventDefault(),e.stopPropagation()},!1)}();</script></body></html>